
=encoding euc-jp

=head1 抩蟆

Image::Size - 今引介引卅禾疋亙仿□卅溥摯及脰颶及釐五今及潸ぜ

=head1 陬邰

    use Image::Size;
    # globe.gif及釐五今毛潸ぜ
    ($globe_x, $globe_y) = imgsize("globe.gif");
    # 仇及詨反﹜X=60 午 Y=40午移爛仄引允﹝

    use Image::Size 'html_imgsize';
    # HTML戲嶽及凶戶'width="X" height="Y"'及溥摯匹釐五今毛潸ぜ
    $size = html_imgsize("globe.gif");
    # $size == 'width="60" height="40"'

    use Image::Size 'attr_imgsize';
    # CGI.pm及伙□民件卞欐允仇午互匹五月方丹卅伉旦玄匹釐五今毛潸ぜ
    @attrs = attr_imgsize("globe.gif");
    # @attrs == ('-width', 60, '-height', 40)

    use Image::Size;
    # 丟乒伉曉及田永白央及釐五今毛潸ぜ
    ($buf_x, $buf_y) = imgsize(\$buf);
    # $buff互犯□正匹丐月午仄引允﹝imgsize()反旦市仿尺及伉白央伊件旦毛优邰午仄引允

=head1 濩抸

B<Image::Size>仿奶皮仿伉反Alex Knowles I<(alex@ed.ac.uk)>卞方勻化踏井木凶﹜
HTML毛民尼永弁仄﹜image正弘卞'width'午'height'由仿丟□正毛馨笛允月汁□伙匹丐月
C<wwwis>旦弁伉皿玄毛葭卞仄化中引允﹝釐五今反白央奶伙抩毛葭卞ま朿匹平乓永扑亙
今木引允﹝公及凶戶﹋拺尹壬鰾互勾中凶伉旦玄匹銀歹木月方丹卅脰颶及方丹卞﹌
き元白央奶伙抩匹窒莢手裟太請仄化手﹜煌遙反楞曰忒今木引六氏﹝

B<Image::Size>反3勾及奶件正□白尼□旦毛奶件禾□玄匹五月方丹卞羼間仄化中引允:

=over

=item imgsize(I<stream>)

X午Y及釐五今﹋賜痐侂午嫖今﹌公仄化I<stream>及脰颶溥摯及
3勾及邰豳毛儅勾伉旦玄毛忒仄引允﹝巨仿□反蟆2勾及邰豳互怳爛聒(B<undef>)匹丐月
仇午卞方勻化憎今木引允﹝公仄化巨仿□妐儂昫互3筇雂侔曰引允﹝
3筇雂怤袬リ玶絰諵馱諵酗互匹五引允﹋公仄化騷橘反拑骰仄引允﹌﹝仄井仄釐五今毛
譬屯月犯□正及溥摯互坌井日卅中午五反忐厙匹允﹝ 

=item html_imgsize(I<stream>)

I<stream>及汔午嫖今(X午Y﹌毛﹜戲嶽今木月HTML IMG正弘卞笛尹月及卞
贗仄凶方丹'width="X height="Y"'午中丹踏摯卞卅勻凶1勾及妐儂昫匹忒仄引允﹝
葭卞卅勻化中月C<imgsize>互撩л允月午B<undef>互忒今木引允﹝忒今木月白巧□穴永玄反
HTML午XHTML及徆杅卞贗殺仄化中引允﹝ 

=item attr_imgsize(I<stream>)

I<stream>及汔午嫖今(X午Y﹌毛﹜Tk支CGI仿奶皮仿伉及方丹卅
抩蟆尥五由仿丟□正毛醜綜及凶戶卞甩永扑亙’氾□皮伙毛銀丹伙□民件卞
忐厙卅4勾及邰豳及伉旦玄及域朿午仄化忒仄引允﹝霾滇讀卅枑曰襖反
C<("-width", X, "-height", Y)>匹允﹝葭卞卅勻化中月C<imgsize>互撩л允月午﹜
B<undef>互忒今木引允﹝ 

=back

犯白巧伙玄匹反C<imgsize()>分仃互奶件禾□玄今木引允﹝1勾丐月中反3勾及賺心寧歹六毛
抸憎讀卞奶件禾□玄仄凶曰﹜B<:all>正弘匹3勾允屯化毛奶件禾□玄允月仇午互匹五引允﹝

=head2 ェ恘溥摯

I<stream>午仄化欐允仇午互匹五月犯□正及潘挀卞反動票及3勾及溥摯互丐曰引允“

=over

=item 妐儂昫

騷橘及旦市仿□﹋妐儂昫﹌互欐今木月午﹜公木反白央奶伙抩匹丐月午邂爛今木引允
﹋濮覆引凶反皿伕本旦及綜僅犯奴伊弁玄伉井日及鍬覆及升切日匹手﹌﹝
公仄化腹綢今木﹜﹋手仄丐木壬﹌犯□正及末□旦午仄化左□皿件今木引允﹝
素舅楔忖諝言憿憧嵽疇說憧腹妦撐迨怷Ыリ礞棹髐砟壑竣丑豸豸洏掍‘丰諢戎╞砲誑
杽鎖互殖引木月井手仄木引六氏﹝

=item 旦市仿□’伉白央伊件旦

stream卞欐今木凶手及互旦市仿□’伉白央伊件旦匹丐木壬﹜奶丟□斥’犯□正互ェ勻化中月
丟乒伉曉及田永白央毛隙仄化中月手及午仄化荸澄今木引允﹝

        # &read_data反犯□正毛升仇井﹋WWW卅升﹌井日潸ぜ仄化仁月手及午仄引允
        $img = &read_data;
        ($x, $y, $id) = imgsize(\$img);
        # $x 午 $y 反釐五今﹜ $id 反奶丟□斥及潘挀匹允

=item 左□皿件今木化中月白央奶伙’甩件玉伙

3筇雂恔祁羃銴炴卞覆擂及奶丟□斥白央奶伙卞瑛太尥仃日木凶﹜左□皿件今木化中月
白央奶伙甩件玉伙﹋拺尹壬C<IO::File>弁仿旦及左皮斥尼弁玄及方丹卅﹌毛欐允仇午匹允﹝
癲螺﹜白央奶伙’禾奶件正互啖が仄引允互﹜扔皮伙□民件互蔽弇允月蟆卞
葭及匏譆卞枑今木引允﹝

        # 欐今木凶 $fh 反IO::File 尺及伉白央伊件旦匹允“
        ($x, $y, $id) = imgsize($fh);
        # 白央奶伙抩匹裟太請允及午き元﹝仄井仄手勻午鏟擂讀匹允

=back

=head2 咥荸今木月白巧□穴永玄

Image::Size 反公木分仃匹﹜動票及白巧□穴永玄卞方月犯□正毛咥荸仄
犯□正釐五今毛竅曰引允“

=over 4

=item GIF

=item JPG

=item XBM

=item XPM

=item PPM 白央立伉□ (PPM/PGM/PBM)

=item XV 扔丞生奶伙

=item PNG

=item MNG

=item TIF

=item BMP

=item PSD (Adobe PhotoShop)

=item SWF (ShockWave/Flash)

=item PCD (Kodak PhotoCD, see notes below)

=back

今日卞B<Image::Magick>乒斥亙□伙互丐月午﹜公木卞方勻化扔禾□玄今木化中月
潘挀手﹜Image::Size卞方勻化扔禾□玄今木引允﹝L<"鏜啦">毛仍厖仁分今中﹝

C<imgsize>奶件正□白尼□旦毛銀丹午﹜手仄皿伕弘仿穴互﹜公木毛忡繡仄民尼永弁仄凶
仃木壬﹜銀歹木卅中襖互3筇雂侕痐竣鴗牏飽ㄓ酗恞秅洏ョ憧蕙謎陘羆捩怳楚
曉匹街仆凶手及及2-3妐儂及彊峎溥匹刓今木引允﹝仇木反左□皿件今木化中月
白央奶伙’甩件玉伙支丟乒伉曉及犯□正毛健丹午五﹜釐五今午き凜卞溥摯手歹井日卅中
樺寧卞忐厙匹允﹝2勾及扔禾□玄’伙□民件反﹜仇及3筇雂恟嶀篜秅藚絰諵楔牏飽
公及凶戶﹜公木毛銀中凶中及匹丐木壬矛□旦午卅月C<imgsize>伙□民件毛銀歹卅仃木壬
卅曰引六氏﹝

(憤坌互扔禾□玄仄化卅中蟈化及白央奶伙及凶戶卞﹌醫歹曰卞B<Image::Magick>毛
銀丹午五﹜犯□正’正奶皿摹帎閡反B<Image::Magick>卞方曰扷屢今木月'format'井日
躂濤支勻化五引允﹝公及凶戶2-3妐儂及彊峎溥及溥摯卞寧歹卅中井手仄木卅中仇午卞
鏜啦仄化仁分今中﹝拺尹壬WBMP白央奶伙反﹜仇及樺寧﹜'Wireless Bitmap (level 0) image'
午扷屢今木月匹仄斤丹﹝

=head2 樹扷及平乓永扑亙午C<$NO_CACHE>

白央奶伙抩互釐五今毛衝磥馱諢═中漱鴗咫峊諢憧薔韝侜洃竣鴗諵﹜仿奶皮仿伉反
犯白巧伙玄匹瑛絆及樹扷毛平乓永扑亙仄引允﹝平乓永扑亙毛綽輪仄凳蕙允屯五井毛
衝磥馱諵縣寣╞掍‘丰諵庣嘀溶對手筏狤今木引允﹝
仇木反葭★﹜仄壬仄壬き元脰颶邰豳毛窒蘸手厙迕允月矢□斥及凶戶及簞嶺毛戲嶽允月凶戶﹜
CGI失皿伉弗□扑亦件互﹜仇及仿奶皮仿伉毛銀勻化中凶凶戶卞馨笛今木引仄凶﹝

仄井仄平乓永扑亙反﹜白央奶伙’扑旦氾丞及凳蕙凜對及荸颶蘸毛旋尹月方丹卅
奷蘸匹白央奶伙互が讀卞戲嶽今木月午五卞反杽鎖毛婁五粟仇允井手仄木引六氏﹝
公及凶戶﹜左皿扑亦件匹奶件禾□玄匹五月孺豢庍醒C<$NO_CACHE>互くェ今木引仄凶﹝
手仄仇及襖互false匹卅中襖卞刉笠今木木壬(襖1﹜NULL匹卅中妐儂昫卅升匹丐木壬﹌﹜
皿伕弘仿丞互﹜公及庍醒毛false卞澀爛允月仇午卞方曰瘋太肣躲卞允月引匹﹜
平乓永扑亙反拑躲卞卅曰引允﹝

由仿丟□正C<$NO_CACHE>反B<imgsize>伙□民件匹奶件禾□玄允月仇午互請侳引允﹝
公仄化奶件禾□玄’正弘B<C<:all>>毛銀勻凶午五卞手奶件禾□玄今木引允﹝手仄
皿伕弘仿穴互公木毛奶件禾□玄仄卅中仇午毛薊氏分午仄化手﹜
B<$Image::Size::NO_CACHE>午敦蟈卞膜澡今木凶由永弗□斥抩卞方曰失弁本旦
允月仇午互匹五引允﹝

=head2 PhotoCD脰颶及釐五今衝

田□斥亦件2.95匹反﹜Kodak PhotoCD脰颶溥摯及扔禾□玄互ェ勻化中引允﹝
仄井仄仇木日及脰颶白央奶伙反職及手及午釐坌啜勻化中引允﹝
丐月白央奶伙反﹋蟈化き元衝產璊ョ冞膜廗銴嶀擗鴗臻臗蘸匹及蟈化及脰颶及
末□旦卞卅曰引允﹝白央奶伙卞呿侳﹜た爛及荸颶蘸卞公木毛孺蜃允月方丹卅手及反
卅中及匹﹜仇仇匹及﹜仇及扔禾□玄反玄伉永平□匹允﹝

仿奶皮仿伉反旦弗□伙午及覆殺尥仃毛銀勻化﹜仇木毛質咥仄引允﹝公仄化交□扒□
﹋丐卅凶﹌卞升及旦弗□伙匹忒仄化俓仄中井毛隙爛允月方丹卞邰菲仄引允﹝蟆卞濩抸仄凶
C<$NO_CACHE>午き元方丹卞﹜仇木反B<Image::Size>毛厙迕允月失皿伉弗□扑亦件匹
奶件禾□玄第Х卅旦市仿□庍醒卞卅曰引允﹝仇及由仿丟□正反C<$PCD_SCALE>午中中﹜
き元抩蟆匹奶件禾□玄今木引允﹝仇木手正弘B<C<:all>>毛銀勻化奶件禾□玄仄凶曰﹜
B<$Image::Size::PCD_SCALE>匹輔寰允月仇午互匹五引允﹝

公及由仿丟□正反動票及襖及1勾卞澀爛今木卅仃木壬卅曰引六氏:

        base/16
        base/4
        base
        base4
        base16
        base64

蟈化及PhotoCD犯奴旦弁互荸颶蘸C<base64>毛儅勻化中月歹仃匹反卅中仇午卞
鏜啦仄化仁分今中﹝PCD白巧□穴永玄卞勾中化及玉平亙丟件玄匹丐木壬葦勾仃月仇午互
匹五月及匹﹜撢端及荸颶蘸反仇仇及域厖卞反ェ勻化中引六氏﹝C<$PCD_SCALE>及襖反
釐妐儂/凝妐儂毛嗉帎仄卅中匹健歹木引允﹝公及凶戶C<base>反C<Base>支C<BaSe>匹手
き元匹允﹝犯白巧伙玄及旦弗□伙反C<base>卞澀爛今木引允﹝

仿奶皮仿伉反﹜邰菲今木凶荸颶蘸互銀迕匹五月井升丹井毛割ロ允月凶戶﹜
PCD白央奶伙毛蝸坌卞づ心慇戈午中丹臢恘反仄卅中午中丹仇午手鏜啦仄化仁分今中﹝
仇仇匹及禾奶件玄反﹜仿奶皮仿伉反躲峔讀卞質咥匹五月凶戶﹜优邰匹五月分仃
づ心慇戈恟毛劑卅仁允月午中丹仇午匹允﹝仇及凶戶﹜站咫竣鴗輹ㄟ魽〩凗鬗
啜中反﹜脰颶及杅輊互衝井產井午中丹仇午匹允﹝撢端﹜公木分仃仄井仿奶皮仿伉反
脰颶白央奶伙井日潸曰請仄引六氏﹝

=head1 褲蠅

葭卞卅月伙□民件C<imgsize>反﹜巨仿□互素舅馱諵伉旦玄及瘉賡及襖毛B<undef>匹
忒仄引允﹝3筇雂怤袬リ狨獑壑峊言憿憧嵽疇說憧舅甚曰引允﹝

職及2勾及伙□民件反巨仿□及樺寧﹜簽卞B<undef>毛忒仄引允﹝

=head1 今日卅月拺

B<attr_imgsize>奶件正□白尼□旦反Tk傀艦午域踝卞銀丹樺寧卞手贗仄化中引允:

    $image = $widget->Photo(-file => $img_path, attr_imgsize($img_path));

C<Tk::Image>弁仿旦反C<CGI>午き元方丹卞母永扑亙互勾中凶左皿扑亦件抩毛銀丹及匹﹜
庍晶反窒手邰曰引六氏﹝

仇及由永弗□斥反Apache Web扔□田戊件氾平旦玄匹銀丹樺寧卞手贗仄化引允﹝
白央奶伙’扔奶朮反づ慇凜鰾匹平乓永扑亙今木引允﹋庍凳今木凶樺寧卞反﹜
凳蕙凜對匹民尼永弁今木引允﹌﹝閡皿伕本旦互1勾及伉弁巨旦玄及渝棉毛旋尹化
酸月B<mod_perl>棕雁及凶戶及忐厙卅た藹匹允﹝
扔□田塢棉匹及白伙由旦抩毛潸曰請允凶戶卞扔皮伉弁巨旦玄毛銀丹午中丹窗Х及方丹卅﹜
B<mod_perl>棕雁及職及鰾反﹜仇及乒斥亙□伙卞午化手贗仄化中引允﹝
仇木反CGI乒斥亙□伙及HTML戲嶽窗Х毛怀簫仄引允﹝C<CGI::img>反URL毛俓仄互曰引允互﹜
C<attr_imgsize>反白央奶伙’由旦毛优邰午仄引允:

    # $Q反CGI弁仿旦及左皮斥尼弁玄匹丐月午仄引允﹝$r 反Apache伉弁巨旦玄’左皮斥尼弁玄匹允
    # $imgpath反"/img/redball.gif"及方丹卅URL匹允﹝
    $r->print($Q->img({ -src => $imgpath,
                        attr_imgsize($r->lookup_uri($imgpath)->filename) }));

仇仇匹及厙鰾反﹜扔□田玉平亙丟件玄’伙□玄毛甩□玉’戊□玉仄卅仁化手方中午
中丹分仃匹卅仁﹜URL毛踏晶尹凶曰﹜職毛膜懇允月蟾閉手殖戶化﹜
騷橘及伉弁巨旦玄’仿奶白扔奶弁伙毛騷仄化Apache互扔皮伉弁巨旦玄毛欐仄化中仁
仇午匹允﹝

=head1 鏜啦

扔奶朮’犯□正及平乓永扑件弘反ェ恘互白央奶伙抩匹丐月午五卞及心墊歹木引允﹝
左□皿件今木凶白央奶伙’甩件玉伙支旦市仿□’伉白央伊件旦反﹜耨俇嶺毛手勻化
平乓永扑亙’犯□正及氾□皮伙及凶戶及交瓦□弁卅平□卞庍晶允月仇午互匹五引六氏﹝
田永白央反MD5乒斥亙□伙毛銀勻化平乓永扑亙允月仇午互匹五引允﹜公仄化公木毛
冪侳左皿扑亦件午允月勾手曰匹允﹝仄井仄蜇凜鰾匹反職及邰豳卞方勻化﹜匙繡允月
伉旦玄毛贏仁仄凶仁反丐曰引六氏﹝

B<Image::Magick>反甩件玉伙匹反卅仁白央奶伙抩毛健丹及匹﹜
公及厙迕反C<imgsize>尺及ェ恘互白央奶伙抩匹芨尹日木凶樺寧卞孺蜃今木引允﹝

=head1 輔嗶鳳恔

wwwis及濩抸午潸ぜ杅芊卞勾中化反 C<http://www.tardis.ed.ac.uk/~ark/wwwis/>, 
L<Image::Magick>﹝

=head1 綜樊

Perl module interface by Randy J. Ray I<(rjray@blackperl.com)>, original
image-sizing code by Alex Knowles I<(alex@ed.ac.uk)> and Andrew Tong
I<(werdna@ugcs.caltech.edu)>, used with their joint permission.

Some bug fixes submitted by Bernd Leibing I<(bernd.leibing@rz.uni-ulm.de)>.
PPM/PGM/PBM sizing code contributed by Carsten Dominik
I<(dominik@strw.LeidenUniv.nl)>. Tom Metro I<(tmetro@vl.com)> re-wrote the JPG
and PNG code, and also provided a PNG image for the test suite. Dan Klein
I<(dvk@lonewolf.com)> contributed a re-write of the GIF code.  Cloyce Spradling
I<(cloyce@headgear.org)> contributed TIFF sizing code and test images. Aldo
Calpini I<(a.calpini@romagiubileo.it)> suggested support of BMP images (which
I I<really> should have already thought of :-) and provided code to work
with. A patch to allow html_imgsize to produce valid output for XHTML, as
well as some documentation fixes was provided by Charles Levert
I<(charles@comm.polymtl.ca)>. The ShockWave/Flash support was provided by
Dmitry Dorofeev I<(dima@yasp.com)>. Though I neglected to take note of who
supplied the PSD (PhotoShop) code, a bug was identified by Alex Weslowski
<aweslowski@rpinteractive.com>, who also provided a test image. PCD support
was adapted from a script made available by Phil Greenspun, as guided to my
attention by Matt Mueller I<mueller@wetafx.co.nz>. A thorough read of the
documentation and source by Philip Newton I<Philip.Newton@datenrevision.de>
found several typos and a small buglet. Ville SkyttI<(ville.skytta@iki.fi)>
provided the MNG and the Image::Magick fallback code.

